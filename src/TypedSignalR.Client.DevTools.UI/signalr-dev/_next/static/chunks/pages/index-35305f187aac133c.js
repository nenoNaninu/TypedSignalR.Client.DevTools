(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2129)}])},2129:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var a=t(5893),l=t(7294);let n=e=>(0,a.jsx)(a.Fragment,{children:e.text&&(0,a.jsx)("pre",{className:"has-background-dark has-text-white pre-code",children:(0,a.jsx)("code",{className:"wrap-anywhere",children:e.text})})}),r=e=>{let[s,t]=(0,l.useState)(""),r=e.options,c=e.message;return(0,l.useEffect)(()=>{let e=JSON.stringify(c.content,null,4);t(e)},[c,r]),(0,a.jsxs)("div",{className:"box m-2",children:[(0,a.jsx)("div",{className:"is-large",children:(0,a.jsx)("strong",{children:e.message.methodName})}),(0,a.jsx)("div",{className:"m-3",children:r.indent?(0,a.jsx)(n,{text:s}):(0,a.jsx)("div",{className:"wrap-anywhere",children:s})})]})},c=e=>{let[s,t]=(0,l.useState)(!1),n=e.messages.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsx)(r,{message:{methodName:e.methodName,content:e.content},options:{indent:s}})},t)).reverse();return(0,a.jsxs)("div",{className:"h-screen vertical-container",children:[(0,a.jsx)("div",{className:"box",children:(0,a.jsxs)("div",{className:"level",children:[(0,a.jsx)("div",{className:"level-left",children:(0,a.jsx)("div",{className:"is-large",children:(0,a.jsx)("strong",{children:"Receive Message Log"})})}),(0,a.jsx)("div",{className:"level-right",children:(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)("label",{className:"checkbox",children:[(0,a.jsx)("input",{type:"checkbox",onChange:e=>{t(e.target.checked)}}),"indent"]})})})]})}),(0,a.jsx)("div",{className:"h-max w-max",children:(0,a.jsx)("div",{className:"has-background-light scrollarea h-max",children:n})})]})};var i=t(7830),o=t(239);let d=e=>{let s=e.toLowerCase();return"true"===s},m=e=>Number(e),h=e=>new Date(e),u=e=>e?JSON.parse(e):null,x={bool:d,char:e=>e,byte:m,sbyte:m,decimal:m,double:m,float:m,int:m,uint:m,long:m,ulong:m,short:m,ushort:m,"byte[]":e=>e,string:e=>e,"global::System.Uri":e=>e,"global::System.Guid":e=>e,"global::System.DateTime":h,"global::System.DateTimeOffset":h},g=e=>e in x?x[e]:u,j=e=>{let s=e.method,t=e.hubConnection,[r,c]=(0,l.useState)([]),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=Array(e.method.parameters.length);c(s)},[e.method]);let d=(0,l.useCallback)(()=>{let e=async()=>{console.log(r);try{let e=await (null==t?void 0:t.invoke(s.methodName,...r)),a="global::System.Threading.Tasks.Task"===s.returnType?"Invocation completed.":JSON.stringify(e,null,4);o(a)}catch(e){o("".concat(e))}};e()},[r,s,t,o]),m=e.method.parameters.map((e,s)=>(0,a.jsx)(p,{name:e.name,typeName:e.typeName,index:s,setArgs:c},s));return(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("label",{className:"label is-large",children:s.methodName}),m,(0,a.jsx)("button",{className:"button is-info",disabled:!t,onClick:e=>d(),children:"Invoke"}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h5",{className:"m-3",children:["response : ",s.returnType]}),(0,a.jsx)(n,{text:i})]})]})},p=e=>{let[s,t]=(0,l.useState)(null),{name:n,typeName:r,index:c,setArgs:i}=e;return(0,a.jsxs)("div",{className:"field",children:[(0,a.jsxs)("label",{className:"label",children:[n," : ",r]}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{className:s?"input is-danger":"input",placeholder:r,onBlur:e=>{try{let s=e.target.value,a=g(r),l=a(s);i(e=>(e[c]=l,[...e])),t(void 0)}catch(e){i(e=>(e[c]=null,[...e])),t("".concat(e))}}})}),s&&(0,a.jsx)("p",{className:"help is-danger",children:"".concat(s)})]})},b=e=>{let s=e.method,t=e.hubConnection,r=e.setStreamMessage,[c,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=Array(e.method.parameters.length);i(s)},[e.method]);let m=(0,l.useCallback)(()=>{let e=async()=>{console.log("=== ServerToClientStreamingHubMethodInvoker ==="),console.log(c);let e=v(s,c);console.log(e);try{null==t||t.stream(s.methodName,...e).subscribe({next:e=>{r({methodName:"".concat(s.methodName," : OnNext"),content:e})},complete:()=>{r({methodName:"".concat(s.methodName," : OnCompleted"),content:""}),d("Stream stoped.")},error:e=>{r({methodName:"".concat(s.methodName," : OnError"),content:"".concat(e)}),d("Stream stoped.")}}),d("Stream started.")}catch(e){d("".concat(e))}};e()},[c,s,t,d,r]),h=e.method.parameters.map((e,s)=>(0,a.jsx)(N,{name:e.name,typeName:e.typeName,index:s,setArgs:i},s));return(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("label",{className:"label is-large",children:s.methodName}),h,(0,a.jsx)("button",{className:"button is-info",disabled:!t,onClick:e=>m(),children:"Invoke"}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h5",{className:"m-3",children:["response : ",s.returnType]}),(0,a.jsx)(n,{text:o})]})]})},N=e=>{let[s,t]=(0,l.useState)(null),{name:n,typeName:r,index:c,setArgs:i}=e;return(0,a.jsxs)("div",{className:"field",children:[(0,a.jsxs)("label",{className:"label",children:[n," : ",r]}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{className:s?"input is-danger":"input",placeholder:r,disabled:"global::System.Threading.CancellationToken"===r,onBlur:e=>{try{let s=e.target.value,a=g(r),l=a(s);i(e=>(e[c]=l,[...e])),t(void 0)}catch(e){i(e=>(e[c]=null,[...e])),t("".concat(e))}}})}),s&&(0,a.jsx)("p",{className:"help is-danger",children:"".concat(s)})]})},v=(e,s)=>{let t=e.parameters.map(e=>e.typeName).indexOf("global::System.Threading.CancellationToken");if(t<0)return s;let a=[...s];return a.splice(t,1),a};var y=t(5403);let f=e=>{let s=e.method,t=e.hubConnection,[r,c]=(0,l.useState)([]),[i,o]=(0,l.useState)(null),[d,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=Array(e.method.parameters.length);c(s)},[e.method]);let h=(0,l.useCallback)(()=>{let e=async()=>{console.log(r);let e=new y.x;o(e);try{let a=A(s,r,e);await (null==t?void 0:t.send(s.methodName,...a)),m("Stream started.")}catch(s){m("".concat(s)),o(null),null==e||e.error(s)}};e()},[r,s,t]),u=w(s),x=e.method.parameters.map((e,s)=>(0,a.jsx)(S,{name:e.name,typeName:e.typeName,index:s,setArgs:c},s));return(0,a.jsxs)("div",{className:"box",children:[(0,a.jsx)("label",{className:"label is-large",children:s.methodName}),x,(0,a.jsx)("button",{className:"button is-info",disabled:!t||!!i,onClick:e=>h(),children:"Invoke"}),(0,a.jsx)(R,{typeName:s.parameters[u].typeName,name:s.parameters[u].name,subject:i}),(0,a.jsx)("button",{className:"button is-info ml-3",disabled:!i,onClick:e=>{null==i||i.complete(),o(null),m("Stream stopped.")},children:"Complete"}),(0,a.jsx)("button",{className:"button is-info ml-3",disabled:!i,onClick:e=>{null==i||i.error("The stream has been canceled."),o(null),m("Stream stopped.")},children:"Cancel"}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h5",{className:"m-3",children:["response : ",s.returnType]}),(0,a.jsx)(n,{text:d})]})]})},S=e=>{let[s,t]=(0,l.useState)(null),{name:n,typeName:r,index:c,setArgs:i}=e;return(0,a.jsxs)("div",{className:"field",children:[(0,a.jsxs)("label",{className:"label",children:[n," : ",r]}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{className:s?"input is-danger":"input",placeholder:r,disabled:T(r),onBlur:e=>{try{let s=e.target.value,a=g(r),l=a(s);i(e=>(e[c]=l,[...e])),t(void 0)}catch(e){i(e=>(e[c]=null,[...e])),t("".concat(e))}}})}),s&&(0,a.jsx)("p",{className:"help is-danger",children:"".concat(s)})]})},C="global::System.Collections.Generic.IAsyncEnumerable",k="global::System.Threading.Channels.ChannelReader",T=e=>!!(e.startsWith(C)||e.startsWith(k)),w=e=>{for(let s=0;s<e.parameters.length;s++)if(T(e.parameters[s].typeName))return s;return -1},A=(e,s,t)=>{let a=w(e);return a<0||(s[a]=t),s},R=e=>{let[s,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(null),{name:c,typeName:i,subject:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsxs)("label",{className:"label",children:[c," : ",i]}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{className:n?"input is-danger":"input",placeholder:i,disabled:!o,onBlur:e=>{try{let s=e.target.value,a=g(E(i)),l=a(s);t(l),r(void 0)}catch(e){t(null),r("".concat(e))}}})}),n&&(0,a.jsx)("p",{className:"help is-danger",children:"".concat(n)})]}),(0,a.jsx)("button",{className:"button is-info",disabled:!o,onClick:e=>null==o?void 0:o.next(s),children:"Next"})]})},E=e=>{if(e.startsWith(C)){let s=C.length+1,t=e.length-1;return e.substring(s,t)}if(e.startsWith(k)){let s=k.length+1,t=e.length-1;return e.substring(s,t)}return""},_=e=>{let{method:s,hubConnection:t,setReceivedMessage:l}=e;return I(s)?(0,a.jsx)(b,{method:s,hubConnection:t,setStreamMessage:l}):W(s)?(0,a.jsx)(f,{method:s,hubConnection:t}):(0,a.jsx)(j,{method:s,hubConnection:t})},I=e=>!!(e.returnType.startsWith("global::System.Collections.Generic.IAsyncEnumerable")||e.returnType.startsWith("global::System.Threading.Tasks.Task<global::System.Collections.Generic.IAsyncEnumerable")||e.returnType.startsWith("global::System.Threading.Tasks.Task<global::System.Threading.Channels.ChannelReader")),W=e=>{for(let s of e.parameters)if(s.typeName.startsWith("global::System.Collections.Generic.IAsyncEnumerable")||s.typeName.startsWith("global::System.Threading.Channels.ChannelReader"))return!0;return!1},M=["has-background-info-light","has-background-primary-light","has-background-danger-light"],O=e=>{let s=e.service,t=e.setReceivedMessage,[r,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),[h,u]=(0,l.useState)(null),x=(0,l.useCallback)(()=>{let e=async()=>{if(r&&await r.stop(),s.isAuthRequired&&!h){m("Please input JWT.");return}let e=s.isAuthRequired?{accessTokenFactory:()=>h}:{},a=new i.s().withUrl(s.path,e).withAutomaticReconnect().configureLogging(o.i.Information).build();for(let e of s.receiverType.methods)a.on(e.methodName,function(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return t({methodName:e.methodName,content:a})});try{await a.start(),c(a),m("Connection succeeded.")}catch(e){m("Exception occurred:\n ".concat(e))}};e()},[r,h,s,c,m,t]);return(0,a.jsx)("div",{className:"container is-max-widescreen ".concat(M[e.index%3]," my-6"),children:(0,a.jsxs)("div",{className:"content p-5",children:[(0,a.jsx)(F,{service:s}),(0,a.jsx)(q,{isAuthRequired:s.isAuthRequired,hubConnection:r,setJwt:u}),(0,a.jsx)("button",{className:"button is-warning my-5",onClick:()=>x(),children:"Connect to Hub"}),(0,a.jsx)(n,{text:d}),(0,a.jsx)(J,{methods:s.hubType.methods,hubConnection:r,setReceivedMessage:t})]})})},F=e=>{let s=e.service;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"is-size-2",children:s.name}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:["Hub Type: ",(0,a.jsx)("strong",{children:s.hubType.interfaceName})]}),(0,a.jsxs)("li",{children:["Receiver Type: ",(0,a.jsx)("strong",{children:s.receiverType.interfaceName})]}),(0,a.jsxs)("li",{children:["Path: ",(0,a.jsx)("strong",{children:s.path})]}),s.isAuthRequired&&(0,a.jsx)("li",{children:(0,a.jsx)("strong",{children:"Authorization Required"})})]})]})},q=e=>{let{isAuthRequired:s,hubConnection:t,setJwt:l}=e;return(0,a.jsx)(a.Fragment,{children:s&&(0,a.jsx)("div",{className:"field",children:(0,a.jsx)("p",{className:"control",children:(0,a.jsx)("input",{className:"input",type:"password",placeholder:"Input JWT",onBlur:e=>{let s=e.target.value;l(s)},disabled:!!t})})})})},J=e=>{let{methods:s,hubConnection:t,setReceivedMessage:l}=e,n=s.map((e,s)=>(0,a.jsx)(_,{method:e,hubConnection:t,setReceivedMessage:l},s));return(0,a.jsx)(a.Fragment,{children:n})},B=e=>{let s=e.services.map((s,t)=>(0,a.jsx)(O,{service:s,index:t,setReceivedMessage:e.setReceivedMessage},t));return(0,a.jsx)("div",{className:"m-5",children:s})},G=()=>{let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)([]),r=(0,l.useCallback)(e=>s(s=>[...s,e]),[]);return(0,l.useEffect)(()=>{let e=async()=>{let e=await fetch("/signalr-dev/spec.json"),s=await e.json();console.log(s),n(s)};e()},[]),(0,a.jsxs)("div",{className:"columns h-screen w-screen",children:[(0,a.jsx)("div",{className:"column is-two-thirds scrollarea",children:(0,a.jsx)(B,{services:t,setReceivedMessage:r})}),(0,a.jsx)("div",{className:"column is-one-thirds",children:(0,a.jsx)("div",{children:(0,a.jsx)(c,{messages:e})})})]})};var P=G}},function(e){e.O(0,[830,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);